:- consult('DB.pl').

% PREDICADO PRINCIPAL CORREGIDO
oracion(S0, S, T0, T) :-
    sintagma_nominal(NUM, _, PERS, S0, S1, T0, T1),
    sintagma_verbal(NUM, PERS, S1, S, T1, T).

oracion(S0, S, T0, T) :-
    pronombre(NUM, _, PERS, S0, S1, T0, T1),  % Quitamos GEN que no se usa
    sintagma_verbal(NUM, PERS, S1, S, T1, T).  % Solo 6 argumentos

% SINTAGMA NOMINAL MEJORADO - Maneja orden de adjetivos
sintagma_nominal(NUM, GEN, PERS, S0, S, T0, T) :-
    determinante(NUM, GEN, PERS, S0, S1, T0, T1),
    sustantivo(NUM, GEN, S1, S, T1, T).

sintagma_nominal(NUM, GEN, PERS, S0, S, T0, T) :-
    determinante(NUM, GEN, PERS, S0, S1, T0, T1),
    sustantivo(NUM, GEN, S1, S2, T1, T2),
    adjetivo(NUM, GEN, S2, S, T2, T), !.

% SINTAGMA NOMINAL sin determinante (para pronombres y sustantivos solos)
sintagma_nominal(NUM, GEN, _, S0, S, T0, T) :-
    sustantivo(NUM, GEN, S0, S, T0, T).

sintagma_nominal(NUM, GEN, PERS, S0, S, T0, T) :-
    pronombre(NUM, GEN, PERS, S0, S, T0, T).

% SINTAGMA VERBAL CORREGIDO (6 argumentos)
sintagma_verbal(NUM, PERS, S0, S, T0, T) :-
    verbo(NUM, PERS, S0, S, T0, T).

sintagma_verbal(NUM, PERS, S0, S, T0, T) :-
    verbo(NUM, PERS, S0, S1, T0, T1),
    sintagma_nominal(_, _, _, S1, S, T1, T).

% REGLAS DE CONCORDANCIA CORREGIDAS
determinante(NUM, GEN, _, [Palabra|S], S, [Traduccion|T], T) :-
    determinante(Palabra, Traduccion, GEN, NUM).

sustantivo(NUM, GEN, [Palabra|S], S, [Traduccion|T], T) :-
    sustantivo(Palabra, Traduccion, GEN, NUM).

verbo(NUM, PERS, [Palabra|S], S, [Traduccion|T], T) :-
    verbo(Palabra, Traduccion, PERS, NUM).

adjetivo(NUM, GEN, [Palabra|S], S, [Traduccion|T], T) :-
    adjetivo(Palabra, Traduccion, GEN, NUM).

pronombre(NUM, GEN, PERS, [Palabra|S], S, [Traduccion|T], T) :-
    pronombre(Palabra, Traduccion, PERS, NUM).
